<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang='en' xmlns='http://www.w3.org/1999/xhtml' xml:lang="en">
<head>
  <meta name='generator' content=
  'HTML Tidy for Linux/x86 (vers 7 December 2008), see www.w3.org' />
  <meta content='text/html; charset=us-ascii' http-equiv='Content-Type' />
  <meta name='description' content='Home Page for the Piccolo2D project.' />
  <meta name='format' content='text/html' />
  <meta name='keywords' content=
  'piccolo2d, piccolo2d.net, piccolo, piccolo.net, zoomable, zui, user interfaces, human-computer interaction, HCI, visualization, education' />
  <meta name='relation' content='(contained in)=http://www.piccolo2d.org' />

  <title>Piccolo2D.Java - Adding Special Effects</title>
  <link href='../piccolo2d.css' rel='stylesheet' type='text/css' />
</head>

<body>
  <div id='navigation'>
    <!-- 
this navigation node is auto-generated and injected
by the script tools/inject_navigation.rb

DO NOT EDIT IT MANUALLY!!!      
-->

    <p class='header'><a href='../index.html'><img src='../images/Piccolo2D-Logo-small.png' alt=
    'Piccolo2D Logo' /></a></p>

    <ul>
      <li>
        <a href='../index.html'>Piccolo2D&nbsp;Home</a>

        <ul>
          <li><a href='../play/index.html'>Play</a></li>

          <li>
            <a href='../learn/index.html'>Learn</a>

            <ul>
              <li><a href='../learn/about.html'>About&nbsp;Piccolo2D</a></li>

              <li><a href='../learn/patterns.html'>Piccolo2D&nbsp;Patterns</a></li>

              <li>
                <a href='../learn/get-started.html'>Getting&nbsp;Started</a>

                <ul>
                  <li><a href=
                  '../learn/out-of-box-java.html'>Java:&nbsp;Out&nbsp;of&nbsp;the&nbsp;Box</a></li>

                  <li><a href=
                  '../learn/out-of-box-dotnet.html'>.Net:&nbsp;Out&nbsp;of&nbsp;the&nbsp;Box</a></li>

                  <li><a href='../learn/interface.html'>The&nbsp;Interface</a></li>

                  <li><a href='../learn/interaction.html'>User&nbsp;Interaction</a></li>

                  <li><a href='../learn/effects.html' class=
                  'selected'>Special&nbsp;Effects</a></li>

                  <li><a href='../learn/fisheye.html'>Fisheye&nbsp;Calendar</a></li>

                  <li><a href='../learn/grapheditor.html'>Graph&nbsp;Editor</a></li>
                </ul>
              </li>

              <li><a href='../learn/api.html'>API&nbsp;Documentation</a></li>

              <li><a href='../learn/comparison.html'>Piccolo2D&nbsp;in&nbsp;Comparison</a></li>

              <li><a href='../learn/publications.html'>Publications</a></li>

              <li><a href='../learn/dev-faq.html'>Developer&nbsp;FAQ</a></li>

              <li><a href='../learn/graphics.html'>Graphics&nbsp;Primer</a></li>
            </ul>
          </li>

          <li><a href='../download.html'>Download</a></li>

          <li><a href='../community.html'>Community</a></li>

          <li><a href='../applications/index.html'>Applications</a></li>

          <li><a href='../press.html'>Press</a></li>

          <li><a href='../sponsors.html'>Sponsors</a></li>
        </ul>
      </li>
    </ul><!--
<p>
        <img src='../images/giny-small.png' alt='a nice graph' />
</p>
-->

    <p class='bugreport'><a href=
    'http://code.google.com/p/piccolo2d/issues/entry?template=User%20defect%20report'>Found a
    Typo?</a></p>

    <p class='validators'><a href='http://validator.w3.org/check/referer'><img src=
    'http://www.w3.org/Icons/valid-xhtml10-blue' alt='Valid XHTML 1.0!' style=
    'border:0;width:88px;height:31px' /></a> <a href=
    'http://jigsaw.w3.org/css-validator/check/referer'><img src=
    'http://www.w3.org/Icons/valid-css-blue' alt='Valid CSS1!' style=
    'border:0;width:88px;height:31px' /></a></p>
  </div>

  <div id='main'>
    <div id='main-head'>
      <h1>Getting Started</h1>Here you will find both basic and advanced tutorials to help you get
      started using Piccolo2D.&nbsp; All tutorials provide examples in both Java and C#.&nbsp; This
      section assumes you have read <a href='patterns.html'>Piccolo2D Patterns</a> and have a basic
      understanding of the concepts presented there.
    </div>

    <p class='toggle' id='language' style=
    'float: right; width: 8.5em; height: 8ex; border:thin solid blue;'>Show examples in<br />
    <img src='images/check.png' id='java0' alt='Checkmark' style=
    'border:0;width:1.0em;height:2ex' /> <a href='javascript:void(0);' class='toggle selected' id=
    'jlink0' onmousedown=
    'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
    "jlink0">Java</a><br />
    <img src='images/check.png' id='csharp0' alt='Checkmark' style=
    'visibility: hidden;border:0;width:1.0em;height:2ex' /> <a href='javascript:void(0);' id=
    'clink0' onmousedown=
    'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
    "clink0">C#</a></p>

    <h1>Adding Special Effects</h1>

    <p class='preamble'>This tutorial will show you how to use activities to control animation and
    other scheduled behaviors.&nbsp; It will cover how to extend existing activities, how to use
    PNode's animation methods, how to set an activity's delegate, and how to schedule activities to
    occur in a specific sequence.</p>

    <p class='image'><img src='images/effects.png' alt='Special effects' /><br />
    Download the complete code sample in <a href=
    'http://piccolo2d.googlecode.com/files/codesample.java-1.2-specialeffects.zip'>Java</a> or
    <a href=
    'http://piccolo2d.googlecode.com/files/codesample.net-1.2-specialeffects.zip'>C#</a>.</p>

    <p id='step1'>1. Setup</p>

    <p><i>We need to create a window with a Piccolo2D canvas, so that we can add the interface
    components to the canvas.</i></p>

    <ol>
      <li>
        <p>First you will need to reference the appropriate packages/namespaces.&nbsp; Add the
        following lines to the top of your code file:</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink1'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink1">Java</a> | <a href='javascript:void(0);' id='clink1' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink1">C#</a></p>

        <div class='snippet' id='snippet1'>
          <pre class='snippet java' id='java1'>
import edu.umd.cs.piccolo.*;
import edu.umd.cs.piccolo.activities.*;
import edu.umd.cs.piccolo.nodes.*;
import edu.umd.cs.piccolox.*;
</pre>
          <pre class='snippet csharp' id='csharp1'>
using UMD.HCIL.Piccolo;
using UMD.HCIL.Piccolo.Activities;
using UMD.HCIL.Piccolo.Nodes;
using UMD.HCIL.Piccolo.Util;
using UMD.HCIL.PiccoloX;
</pre>
        </div>

        <p>The first line adds the base Piccolo2D types, such as <code>PNode</code>.&nbsp; The
        second line includes the activity classes.&nbsp; The third line includes the default node
        types that Piccolo2D provides, all of which extend <code>PNode</code>.&nbsp; The fourth
        line (for the C# sample) includes several utility classes.&nbsp; And the last line includes
        various "extras," such as <code>PForm</code> in .NET and <code>PFrame</code> in Java, which
        will be used below.</p>
      </li>

      <li>
        <p>Next we will extend the <code>PForm</code> class in .NET or the <code>PFrame</code>
        class in Java. This is a convenience class that adds a <code>PCanvas</code> to a window.
        When you extend this class, you should NOT add your Piccolo2D code to the constructor.
        Instead, you should override the <code>initialize</code> method and add all of your
        Piccolo2D code there.&nbsp; See the <a href='dev-faq.html'>FAQ</a> for more details.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink2'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink2">Java</a> | <a href='javascript:void(0);' id='clink2' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink2">C#</a></p>

        <div class='snippet' id='snippet2'>
          <pre class='snippet java' id='java2'>
public class EffectsFrame extends PFrame {
        public void initialize() {
                //Add Piccolo2D code here.
        }
}
</pre>
          <pre class='snippet csharp' id='csharp2'>
public class EffectsForm : PForm {
        public override void Initialize() {
                //Add Piccolo2D code here.
        }
}
</pre>
        </div>
      </li>
    </ol>

    <h2 id='step2'>2. Create the Target for our Activities</h2>

    <p class='preamble'>An activity defines a time-dependent behavior.&nbsp; You can perform any
    operation you want each time the activity steps.&nbsp; Typically, you will modify a node in
    some way.&nbsp; For example, to animate a node, you would move the node each time the activity
    steps.&nbsp; Here we will define a new node that will be the target of our activities.</p>

    <ol>
      <li>
        <p>We will create a new node and position it at the bottom right corner of the
        screen.&nbsp; Add the following lines of code to the <code>initialize</code> method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink3'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink3">Java</a> | <a href='javascript:void(0);' id='clink3' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink3">C#</a></p>

        <div class='snippet' id='snippet3'>
          <pre class='snippet java' id='java3'>
// Create a new node that we will apply different activities to, and
// place that node at location 200, 200.
final PNode aNode = PPath.createRectangle(0, 0, 100, 80);
PLayer layer = getCanvas().getLayer();
layer.addChild(aNode);
aNode.setOffset(200, 200);
</pre>
          <pre class='snippet csharp' id='csharp3'>
// Create a new node that we will apply different activities to, and
// place that node at location 200, 200.
aNode = PPath.CreateRectangle(0, 0, 100, 80);
PLayer layer = Canvas.Layer;
layer.AddChild(aNode);
aNode.SetOffset(Canvas.Width-aNode.Width, Canvas.Height-aNode.Height);
</pre>
        </div>
      </li>
    </ol>

    <h2 id='step3'>3. Extend PActivity</h2>

    <p class='preamble'><i>Here we will explore how to create a new activity to act on our node by
    extending one of the activity classes.</i></p>

    <ol>
      <li>
        <p>First, we will design a new flash activity that will toggle our node's color between red
        and green continuously without terminating.&nbsp; To do this, we will extend
        <code>PActivity</code>, the base activity type.&nbsp; Add the following internal class
        beneath the <code>initialize</code> method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink4'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink4">Java</a> | <a href='javascript:void(0);' id='clink4' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink4">C#</a></p>

        <div class='snippet' id='snippet4'>
          <pre class='snippet java' id='java4'>
PActivity flash = new PActivity(-1, 500, currentTime + 5000) {
        boolean fRed = true;
                        
        protected void activityStep(long elapsedTime) {
                super.activityStep(elapsedTime);
                                
                // Toggle the target node's brush color between red and green
                // each time the activity steps.
                if (fRed) {
                        aNode.setPaint(Color.red);
                } else {
                        aNode.setPaint(Color.green);
                }               
                
                fRed = !fRed;
        }
};
</pre>
          <pre class='snippet csharp' id='csharp4'>
class Flash : PActivity {
        bool fRed;
        PNode target;

        public Flash(PNode target, long aDuration, long aStepInterval,
                long aStartTime) : base(aDuration, aStepInterval, aStartTime) {

                this.target = target;
        }

        protected override void OnActivityStep(long elapsedTime) {
                base.OnActivityStep (elapsedTime);

                // Toggle the target node's brush color between red and green
                // each time the activity steps.
                if (fRed) {
                        target.Brush = Brushes.Red;
                } else {
                        target.Brush = Brushes.Green;
                }               
                                
                fRed = !fRed;
        }
}
</pre>
        </div>

        <p><code>PActivity</code> is the top-level activity class that all activities descend
        from.&nbsp; It will run for a predetermined time, specified by its duration, and it will
        step a number of times, specified by its step interval.&nbsp; <code>PActivity</code>
        provides three methods that you can override to be notified when an activity starts, each
        time it steps, and when it finishes.&nbsp; In Piccolo2D.NET these methods are
        <code>OnActivityStarted()</code>, <code>OnActivityStep()</code>, and
        <code>OnActivityFinished()</code>.&nbsp; In Piccolo2D.Java, they are
        <code>activityStarted()</code>, <code>activityStep()</code>, and
        <code>activityFinished()</code>.&nbsp; By default, nothing will happen when a PActivity
        steps.&nbsp; Typically, you will extend PActivity and override <code>activityStep()</code>
        or <code>OnActivityStep()</code> so that you can perform some operation for each step of
        the activity.</p>

        <p>In the above example, we create a new constructor that will take in the node whose fill
        color we wish to flash.&nbsp; The constructor also takes in the duration, step interval and
        start time for the activity.&nbsp; We pass these millisecond values to the base
        activity.</p>

        <p>We also override the <code>activityStep()</code> method in java and the
        <code>OnActiviytStep()</code> method in .NET.&nbsp; For each step of the interval we toggle
        our target node's color between red and green.</p>
      </li>

      <li>
        <p>Next, we will create a new flash activity and schedule it with the root.&nbsp; Add the
        following lines of code to the <code>initialize</code> method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink5'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink5">Java</a> | <a href='javascript:void(0);' id='clink5' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink5">C#</a></p>

        <div class='snippet' id='snippet5'>
          <pre class='snippet java' id='java5'>
// Store the current time in milliseconds for use below.
long currentTime = System.currentTimeMillis();

// Create a new custom "flash" activity. This activity will start running in
// five seconds, and while it runs it will flash aNode's paint between
// red and green every half second.
PActivity flash = new PActivity(-1, 500, currentTime + 5000)
        { /* see code above */ });
        
// Schedule the activity.
getCanvas().getRoot().addActivity(flash);
</pre>
          <pre class='snippet csharp' id='csharp5'>
// The animate activities will start immediately (in the next call to
// PRoot.processInputs) by default. Here we set their start times (in PRoot
// global time) so that they start when the previous one has finished.
a1.StartTime = currentTime;
a2.StartAfter(a1);
a3.StartAfter(a2);





</pre>
        </div>

        <p>First, we store the current time in milliseconds, so that we can use it with our
        activities below.</p>

        <p>Next, we create a flash activity, passing it the node we created above as the
        target.&nbsp; We specify a duration of -1, which will cause the activity to run
        continuously, and a step interval of 500ms.&nbsp; Finally, we set the start time to be
        <code>currentTime</code> + 5000ms, indicating that we want our activity to start stepping
        five seconds from now.</p>

        <p>Finally, we schedule the activity with the root.&nbsp; An activity will not run until it
        has been scheduled to do so.</p>

        <p>Note, for clarity, this example uses a full static class to define the Flash
        activity.&nbsp; But, Piccolo2D does provide a few shortcuts.&nbsp; In Piccolo2D.Java, you
        could use an anonymous inner class to inline the Flash activity.&nbsp; The .NET Framework
        does not support anonymous inner classes.&nbsp; However, with Piccolo2D.NET, you could
        still instantiate a <code>PActivity</code> and set its <code>ActivityStepped</code>
        delegate, rather than creating a new class.&nbsp; You would then move the code in the
        <code>OnActivityStep()</code> method to your new delegate method.&nbsp; For an example of
        how to define a flash activity in this way, see the <a href=
        'patterns.html#activities'>Activities</a> section of the patterns document.&nbsp; Activity
        delegates will be described in detail later.</p>
      </li>
    </ol>

    <h2 id='step4'>4. Use PNode's Animation Methods</h2>

    <p class='preamble'>Now, let's add some animation.&nbsp; It turns out we don't have to create
    any activities to do this.&nbsp; PNode provides several convenience methods that will animate a
    node in various ways.&nbsp; Internally, these methods will of course create activities.&nbsp;
    Note, if you want to create animation activities from scratch, you should extend
    <code>PInterpolatingActivity</code>.</p>

    <ol>
      <li>
        <p>We will use <code>PNode's</code> <code>AnimateToPositionScaleRotation()</code> method to
        move the node across the screen, rotating it and scaling it along the way.&nbsp; Add the
        following lines of code to the <code>initialize</code> method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink6'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink6">Java</a> | <a href='javascript:void(0);' id='clink6' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink6">C#</a></p>

        <div class='snippet' id='snippet6'>
          <pre class='snippet java' id='java6'>
// Create three activities that animate the node's position. Since our node
// already descends from the root node the animate methods will automatically
// schedule these activities for us.
PActivity a1 = aNode.animateToPositionScaleRotation(0, 0, 0.5, 0, 5000);
PActivity a2 = aNode.animateToPositionScaleRotation(100, 0, 1.5,
        Math.toRadians(110), 5000);
PActivity a3 = aNode.animateToPositionScaleRotation(200, 100, 1, 0, 5000);
</pre>
          <pre class='snippet csharp' id='csharp6'>
// Create three activities that animate the node's position. Since our node
// already descends from the root node the animate methods will automatically
// schedule these activities for us.
PActivity a1 = aNode.AnimateToPositionScaleRotation(0f, 0f, 0.5f, 0f, 5000);
PActivity a2 = aNode.AnimateToPositionScaleRotation(100f, 0f, 1.5f, 110f, 5000);
PActivity a3 = aNode.AnimateToPositionScaleRotation(200f, 100f, 1f, 0f, 5000);
</pre>
        </div>

        <p>The <code>AnimateToPositionScaleRotation()</code> method will animate a node from its
        current transform to a new transform specified by the given position, scale and
        rotation.&nbsp; The first two arguments to this method specify the new position.&nbsp; The
        third argument specifies the new scale.&nbsp; The fourth argument specifies the new
        rotation.&nbsp; And, the final argument specifies the duration of the animation.&nbsp; This
        method will also return the newly scheduled activity.</p>

        <p>First, we will animate the node to the position (0, 0) and scale it down to .5.&nbsp; We
        will not rotate the node at all.&nbsp; This animation will occur over a period of five
        seconds.</p>

        <p>Next, we will&nbsp; animate the node to the position (100, 0), scale it up to 1.5, and
        rotate it 110 degrees.&nbsp; This animation will occur over a period of five seconds.</p>

        <p>Finally, we will animate the node to the position (200, 100), scale it back down to its
        natural size, and rotate it back to 0 degrees.&nbsp; This animation will occur over a
        period of five seconds.</p>
      </li>

      <li>
        <p>Now, we need to specify the order in which these animations will occur.&nbsp; Add the
        following lines of code to the <code>initialize</code> method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink7'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink7">Java</a> | <a href='javascript:void(0);' id='clink7' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink7">C#</a></p>

        <div class='snippet' id='snippet7'>
          <pre class='snippet java' id='java7'>
// The animate activities will start immediately (in the next call to
// PRoot.processInputs) by default. Here we set their start times (in PRoot
// global time) so that they start when the previous one has finished.
a1.setStartTime(currentTime);
a2.startAfter(a1);
a3.startAfter(a2);
</pre>
          <pre class='snippet csharp' id='csharp7'>
// The animate activities will start immediately (in the next call to
// PRoot.processInputs) by default. Here we set their start times (in PRoot
// global time) so that they start when the previous one has finished.
a1.StartTime = currentTime;
a2.StartAfter(a1);
a3.StartAfter(a2);
</pre>
        </div>

        <p><code>PNode's</code> animation methods will always schedule the activities they create
        to start running immediately.&nbsp; We don't want these activities to run at the same time,
        since they would conflict with each other.&nbsp; So, we need to specify when they should
        occur.</p>

        <p>We set the first activity's start time to be <code>currentTime</code>.&nbsp; We use
        <code>PActivity's</code> <code>StartAfter()</code> method to specify that the second
        activity should start after the first one and that the third activity should start after
        the second one.&nbsp; We could have also achieved the same effect by setting the start time
        on all three activities.&nbsp; Since our flash activity starts five seconds from
        <code>currentTime</code>, it should begin as soon as the first activity ends.</p>
      </li>
    </ol>

    <h2 id='step5'>5. Set the Activity Delegate</h2>

    <p class='preamble'>Sometimes you will want to be notified when an Activity goes through
    different states, such as starting and stopping.&nbsp; Of course, you could extend PActivity
    and override the appropriate methods to be notified of these state changes, as we did with the
    flash activity above.&nbsp; But, what if you want to keep track of an activity that has already
    been defined elsewhere.&nbsp; For example what if you want something to happen at the end of an
    activity that was created using one of PNode's animate methods.&nbsp; In this situation you
    should use the activity delegate.&nbsp; Below we will use the activity delegate to get notified
    when an activity starts and stops.</p>

    <ol>
      <li>
        <p>We will print out a message when our first animation activity starts and stops.&nbsp;
        Add the following lines of code to the project.&nbsp; The java snippet should be added
        directly to the <code>initialize</code> method.&nbsp; The .NET snippet should be added
        beneath <code>initialize</code>.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink8'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink8">Java</a> | <a href='javascript:void(0);' id='clink8' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink8">C#</a></p>

        <div class='snippet' id='snippet8'>
          <pre class='snippet java' id='java8'>
a1.setDelegate(new PActivity.PActivityDelegate() {
        public void activityStarted(PActivity activity) {
                System.out.println("a1 started");
        }
        public void activityStepped(PActivity activity) {}
        public void activityFinished(PActivity activity) {
                System.out.println("a1 finished");
        }
});
</pre>
          <pre class='snippet csharp' id='csharp8'>
// This method will be called when a1 starts.
public void a1ActivityStarted(PActivity activity) {
        System.Console.WriteLine("a1 started");
}

// This method will be called when a1 finishes.
public void a1ActivityFinished(PActivity activity) {
        System.Console.WriteLine("a1 finished");
}
</pre>
        </div>

        <p>The Java version of this snippet implements the PActivityDelegate interface, which
        includes three methods (<code>activityStarted()</code>, <code>activityStepped()</code> and
        <code>activityFinished()</code>).&nbsp; The <code>activityStepped()</code> method is simply
        left empty, since we are not interested in doing anything when the activity steps.</p>

        <p>The C# version could have been written the same way.&nbsp; But, since .NET has language
        support for delegates, Piccolo2D.NET provides a separate delegate for each of these
        methods, allowing you to set them individually.&nbsp;&nbsp; That way you don't have to
        implement the whole interface if you don't need to.&nbsp; In this case, we provide delegate
        methods that will get called when the activity starts and stops.</p>

        <p>In both versions, when the activity starts, we print out a message that says "a1
        started" and when it ends, we print a message that says "a1 finished".</p>
      </li>

      <li>
        <p>Now that we have implemented the activity delegate methods we need to register them with
        the activity.&nbsp; Add the following lines of code to the <code>initialize</code>
        method.</p>

        <p class='toggle'><a href='javascript:void(0);' class='toggle selected' id='jlink9'
        onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);' name=
        "jlink9">Java</a> | <a href='javascript:void(0);' id='clink9' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);' name=
        "clink9">C#</a></p>

        <div class='snippet' id='snippet9'>
          <pre class='snippet java' id='java9'>
// We can use the delegate methods to learn about and act on the different
// states an activity goes through, such as when it starts and stops.

The Java version defines and attaches the delegate using an anonymous class.
See previous code sample.
</pre>
          <pre class='snippet csharp' id='csharp9'>
// We can use the delegate methods to learn about and act on the different
// states an activity goes through, such as when it starts and stops.
a1.ActivityStarted = new ActivityStartedDelegate(a1ActivityStarted);
a1.ActivityFinished = new ActivityFinishedDelegate(a1ActivityFinished);

</pre>
        </div>

        <p>In the Java version, we set the activity delegate to our implementation of
        <code>PActivityDelegate</code>.&nbsp; In the C# version, we set each of the delegate
        methods individually.</p>
      </li>
    </ol>
  </div><script src='snippets.js' type='text/javascript'>
  //<![CDATA[
    //]]>
  </script><script src='../scrollsidebar.js' type='text/javascript'>
  //<![CDATA[
    //]]>
  </script>
</body>
</html>
