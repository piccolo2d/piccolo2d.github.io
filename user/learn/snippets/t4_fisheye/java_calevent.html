CalendarNode.this.addInputEventListener(new PBasicInputEventHandler() {
    public void mouseReleased(PInputEvent event) {
        DayNode pickedDay = (DayNode) event.getPickedNode();
        if (pickedDay.hasWidthFocus && pickedDay.hasHeightFocus) {
            setFocusDay(null, true);
        } else {
            setFocusDay(pickedDay, true);
        }
    }
});
public void setFocusDay(DayNode focusDay, boolean animate) {
    for (int i = 0; i < getChildrenCount(); i++) {
        DayNode each = (DayNode) getChild(i);
        each.hasWidthFocus = false;
        each.hasHeightFocus = false;
    }

    if (focusDay == null) {
        daysExpanded = 0;
        weeksExpanded = 0;
    } else {
        focusDay.hasWidthFocus = true;
        daysExpanded = 1;
        weeksExpanded = 1;

        for (int i = 0; i < numDays; i++) {
            getDay(focusDay.week, i).hasHeightFocus = true;
        }            

        for (int i = 0; i < numWeeks; i++) {
            getDay(i, focusDay.day).hasWidthFocus = true;
        }            
    }
                
    layoutChildren(animate);
}