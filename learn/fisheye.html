<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta name='generator' content=
  'HTML Tidy for Linux/x86 (vers 7 December 2008), see www.w3.org' />
  <meta content='text/html; charset=us-ascii' http-equiv='Content-Type' />
  <meta name='description' content='Home Page for the Piccolo2D project.' />
  <meta name='format' content='text/html' />
  <meta name='keywords' content=
  'piccolo2d, piccolo2d.net, piccolo, piccolo.net, zoomable, zui, user interfaces, human-computer interaction, HCI, visualization, education' />
  <meta name='relation' content='(contained in)=http://www.piccolo2d.org' />

  <title>Piccolo2D.Java - Fisheye Calendar</title>
  <link href='../piccolo2d.css' rel='stylesheet' type='text/css' />
</head>

<body>
  <div id='navigation'>
    <!-- 
this navigation node is auto-generated and injected
by the script tools/inject_navigation.rb

DO NOT EDIT IT MANUALLY!!!      
-->

    <p class='header'><a href='../index.html'><img src='../images/Piccolo2D-Logo-small.png' alt=
    'Piccolo2D Logo' /></a></p>

    <ul>
      <li>
        <a href='../index.html'>Piccolo2D&nbsp;Home</a>

        <ul>
          <li><a href='../play/index.html'>Play</a></li>

          <li>
            <a href='../learn/index.html'>Learn</a>

            <ul>
              <li><a href='../learn/about.html'>About&nbsp;Piccolo2D</a></li>

              <li><a href='../learn/patterns.html'>Piccolo2D&nbsp;Patterns</a></li>

              <li>
                <a href='../learn/get-started.html'>Getting&nbsp;Started</a>

                <ul>
                  <li><a href=
                  '../learn/out-of-box-java.html'>Java:&nbsp;Out&nbsp;of&nbsp;the&nbsp;Box</a></li>

                  <li><a href=
                  '../learn/out-of-box-dotnet.html'>.Net:&nbsp;Out&nbsp;of&nbsp;the&nbsp;Box</a></li>

                  <li><a href='../learn/interface.html'>The&nbsp;Interface</a></li>

                  <li><a href='../learn/interaction.html'>User&nbsp;Interaction</a></li>

                  <li><a href='../learn/effects.html'>Special&nbsp;Effects</a></li>

                  <li><a href='../learn/fisheye.html' class=
                  'selected'>Fisheye&nbsp;Calendar</a></li>

                  <li><a href='../learn/grapheditor.html'>Graph&nbsp;Editor</a></li>
                </ul>
              </li>

              <li><a href='../learn/api.html'>API&nbsp;Documentation</a></li>

              <li><a href='../learn/comparison.html'>Piccolo2D&nbsp;in&nbsp;Comparison</a></li>

              <li><a href='../learn/publications.html'>Publications</a></li>

              <li><a href='../learn/dev-faq.html'>Developer&nbsp;FAQ</a></li>

              <li><a href='../learn/graphics.html'>Graphics&nbsp;Primer</a></li>
            </ul>
          </li>

          <li><a href='../download.html'>Download</a></li>

          <li><a href='../community.html'>Community</a></li>

          <li><a href='../applications/index.html'>Applications</a></li>

          <li><a href='../press.html'>Press</a></li>

          <li><a href='../sponsors.html'>Sponsors</a></li>
        </ul>
      </li>
    </ul><!--
<p>
        <img src='../images/giny-small.png' alt='a nice graph' />
</p>
-->

    <p class='bugreport'><a href=
    'http://code.google.com/p/piccolo2d/issues/entry?template=User%20defect%20report'>Found a
    Typo?</a></p>

    <p class='validators'><a href='http://validator.w3.org/check/referer'><img src=
    'http://www.w3.org/Icons/valid-xhtml10-blue' alt='Valid XHTML 1.0!' style=
    'border:0;width:88px;height:31px' /></a> <a href=
    'http://jigsaw.w3.org/css-validator/check/referer'><img src=
    'http://www.w3.org/Icons/valid-css-blue' alt='Valid CSS1!' style=
    'border:0;width:88px;height:31px' /></a></p>
  </div>

  <div id='main'>
    <div id='main-head'>
      <h1>Getting Started</h1>Here you will find both basic and advanced tutorials to help you get
      started using Piccolo2D.&nbsp; All tutorials provide examples in both Java and C#.&nbsp; This
      section assumes you have read <a href='patterns.html'>Piccolo2D Patterns</a> and have a basic
      understanding of the concepts presented there.
    </div>

    <p class='toggle' id='language' style=
    'float: right; width: 8.5em; height: 8ex; border:thin solid blue;'>Show examples in<br />
    <img src='images/check.png' id='java0' alt='Checkmark' style=
    'border:0;width:1.0em;height:2ex' /> <a href='javascript:void(0);' name='jlink0' class=
    'toggle selected' id='jlink0' onmousedown=
    'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a><br />

    <img src='images/check.png' id='csharp0' alt='Checkmark' style=
    'visibility: hidden;border:0;width:1.0em;height:2ex' /> <a href='javascript:void(0);' name=
    'clink0' id='clink0' onmousedown=
    'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

    <h1>Fisheye Calendar</h1>

    <p class='preamble'>This tutorial will illustrate how you might build a tabular fisheye
    interface using Piccolo2D.&nbsp; Clicking on one cell will give that cell the fisheye focus
    while shrinking the surrounding cells.&nbsp; Such an interface might be useful when you don't
    have much screen real estate to deal with.</p>

    <p class='image'><img src='images/fisheye.jpg' alt='Fisheye Calendar' /><br />
    Download the complete code sample in <a href=
    'http://piccolo2d.googlecode.com/files/codesample.java-1.2-tabularfisheye.zip'>Java</a> or
    <a href=
    'http://piccolo2d.googlecode.com/files/codesample.net-1.2-tabularfisheye.zip'>C#</a>.<br />
    <a href='../play/applet/fisheyecalendar.html'>Play</a> with the interface.</p>

    <h2>Overall Architecture</h2><br />
    <br />
    In this example, we will create two custom nodes, a <code>DayNode</code> and a
    <code>CalendarNode</code>.&nbsp; The <code>DayNode</code> will be responsible for rendering the
    contents of a single cell within the calendar.&nbsp; This node will use <i>semantic zooming</i>
    to control how a day is rendered, depending on whether or not that day is focused.<br />
    <br />

    <p>The <code>CalendarNode</code> will be responsible for laying out all of the
    <code>DayNodes</code> in a tabular fashion.&nbsp; Every <code>DayNode</code> will be added as a
    child to the <code>CalendarNode</code>.&nbsp; This node will also handle the user interaction,
    focusing on a cell in response to a click, and animating transitions when requested to do
    so.</p>

    <p>We will then create a reusable <code>TabularFisheye</code> component that extends
    <code>PCanvas</code>.&nbsp; This component will add the calendar node to the scene-graph and
    resize it when the component is resized.&nbsp; Finally, we will create a wrapper window called
    <code>TabularFisheyeTester</code> and add our new component to the window.</p>

    <h2 id='step1'>1. Create a Day Node</h2>

    <p class='preamble'>We will create a node that will be responsible for rendering the contents
    of a single cell within in the calendar.&nbsp; This node will use semantic zooming to control
    how each day is rendered depending on whether or not the day has the fisheye focus.&nbsp; The
    day that is expanded both vertically and horizontally has the focus.</p>

    <ol>
      <li>
        <p>Here, we will create the day node.&nbsp; Add the following class to your project.</p>

        <p class='toggle'><a href='javascript:void(0);' name='jlink1' class='toggle selected' id=
        'jlink1' onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a>
        | <a href='javascript:void(0);' name='clink1' id='clink1' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

        <div class='snippet' id='snippet1'>
          <pre class='snippet java' id='java1'>
static class DayNode extends PNode {
    boolean hasWidthFocus;
    boolean hasHeightFocus;
    ArrayList lines;
    int week;
    int day;
    String dayOfMonthString;

    public DayNode(int week, int day) {
        lines = new ArrayList();
        lines.add("7:00 AM Walk the dog.");
        lines.add("9:30 AM Meet John for Breakfast.");
        lines.add("12:00 PM Lunch with Peter.");
        lines.add("3:00 PM Research Demo.");
        lines.add("6:00 PM Pickup Sarah from gymnastics.");
        lines.add("7:00 PM Pickup Tommy from karate.");
        this.week = week;
        this.day = day;
        this.dayOfMonthString = Integer.toString((week * 7) + day);
        setPaint(Color.BLACK);
    }

    public int getWeek() {
        return week;
    }

    public int getDay() {
        return day;
    }

    public boolean hasHeightFocus() {
        return hasHeightFocus;
    }

    public void setHasHeightFocus(boolean hasHeightFocus) {
        this.hasHeightFocus = hasHeightFocus;
    }

    public boolean hasWidthFocus() {
        return hasWidthFocus;
    }

    public void setHasWidthFocus(boolean hasWidthFocus) {
        this.hasWidthFocus = hasWidthFocus;
    }
    
    protected void paint(PPaintContext paintContext) {
        Graphics2D g2 = paintContext.getGraphics();

        g2.setPaint(getPaint());
        g2.draw(getBoundsReference());
        g2.setFont(CalendarNode.DEFAULT_FONT);

        float y = (float) getY() + CalendarNode.TEXT_Y_OFFSET;
        paintContext.getGraphics().drawString(dayOfMonthString,
            (float) getX() + CalendarNode.TEXT_X_OFFSET, y);

        if (hasWidthFocus &amp;&amp; hasHeightFocus) {
            paintContext.pushClip(getBoundsReference());
            for (int i = 0; i &lt; lines.size(); i++) {
                y += 10;
                g2.drawString((String)lines.get(i),
                    (float) getX() + CalendarNode.TEXT_X_OFFSET, y);
            }
            paintContext.popClip(getBoundsReference());
        }
    }
}
</pre>
          <pre class='snippet csharp' id='csharp1'>
class DayNode : PNode {
    bool hasWidthFocus;
    bool hasHeightFocus;
    ArrayList lines;
    int week;
    int day;
    String dayOfMonthString;

    public DayNode(int week, int day) { 
        lines = new ArrayList();
        lines.Add("7:00 AM Walk the dog.");
        lines.Add("9:30 AM Meet John for Breakfast.");
        lines.Add("12:00 PM Lunch with Peter.");
        lines.Add("3:00 PM Research Demo.");
        lines.Add("6:00 PM Pickup Sarah from gymnastics.");
        lines.Add("7:00 PM Pickup Tommy from karate.");
        this.week = week;
        this.day = day;
        this.dayOfMonthString = ((week * 7) + day) + "";
        Brush = Brushes.Black;
    }
        
    public int Week {
        get { return week; }
    }

    public int Day {
        get { return day; }
    }

    public bool HasHeightFocus {
        get {
            return hasHeightFocus;
        }
        set {
            hasHeightFocus = value;
        }
    }

    public bool HasWidthFocus {
        get {
            return hasWidthFocus;
        }
        set {
            hasWidthFocus = value;
        }
    }
                        
    protected override void Paint(PPaintContext paintContext) {
        Graphics g = paintContext.Graphics;
        g.DrawRectangle(Pens.Black, Bounds.X, Bounds.Y,
            Bounds.Width, Bounds.Height);

        float y = (float) Y + CalendarNode.TEXT_Y_OFFSET;
        g.DrawString(dayOfMonthString, CalendarNode.DEFAULT_FONT,
            Brush, (float) X + CalendarNode.TEXT_X_OFFSET, y);

        if (hasWidthFocus &amp;&amp; hasHeightFocus) {
            paintContext.PushClip(new Region(Bounds));
            for (int i = 0; i &lt; lines.Count; i++) {
                y += 10;
                g.DrawString((String)lines[i], CalendarNode.DEFAULT_FONT,
                    Brush, X + CalendarNode.TEXT_X_OFFSET, y);
            }
            paintContext.PopClip();
        }
    }
}
</pre>
        </div>

        <p>This node stores two boolean values that indicate whether it should be expanded
        vertically and horizontally, a list of appointments, two integer values for the week and
        the day that the cell lies on, and a string representation of the day of the month.</p>

        <p>The paint method draws the day of the month in the upper left corner.&nbsp; And, when
        the cell has the focus, it also renders the list of appointments, since there will be more
        space for this information.&nbsp; A cell has the focus when it is expanded both vertically
        and horizontally.&nbsp; See the picture above.</p>
      </li>
    </ol>

    <h2 id='step2'>2. Create a Calendar Node</h2>

    <p class='preamble'>We will create a node that will be responsible for laying out all of the
    day nodes within the tabular calendar.</p>

    <ol>
      <li>
        <p>Here, we will create the calendar node.&nbsp; Add the following class to your
        project.</p>

        <p class='toggle'><a href='javascript:void(0);' name='jlink2' class='toggle selected' id=
        'jlink2' onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a>
        | <a href='javascript:void(0);' name='clink2' id='clink2' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

        <div class='snippet' id='snippet2'>
          <pre class='snippet java' id='java2'>
static class CalendarNode extends PNode {
    static int DEFAULT_NUM_DAYS = 7;
    static int DEFAULT_NUM_WEEKS = 12;
    static int TEXT_X_OFFSET = 1;
    static int TEXT_Y_OFFSET = 10;
    static int DEFAULT_ANIMATION_MILLIS = 250;
    static float FOCUS_SIZE_PERCENT = 0.65f;
    static Font DEFAULT_FONT = new Font("Arial", Font.PLAIN, 10);
        
    int numDays = DEFAULT_NUM_DAYS;
    int numWeeks = DEFAULT_NUM_WEEKS;
    int daysExpanded = 0;
    int weeksExpanded = 0;
                
    public CalendarNode() {             
        for (int week = 0; week &lt; numWeeks; week++) {
            for (int day = 0; day &lt; numDays; day++) {
                addChild(new DayNode(week, day));
            }
        }                       
    }
                
    public DayNode getDay(int week, int day) {
        return (DayNode) getChild((week * numDays) + day);
    }
                
    protected void layoutChildren(boolean animate) {
        double focusWidth = 0;
        double focusHeight = 0;
                        
        if (daysExpanded != 0 &amp;&amp; weeksExpanded != 0) {
            focusWidth = (getWidth() * FOCUS_SIZE_PERCENT) / daysExpanded;
            focusHeight = (getHeight() * FOCUS_SIZE_PERCENT) / weeksExpanded;
        }
                        
        double collapsedWidth = (getWidth() - (focusWidth * daysExpanded))
            / (numDays - daysExpanded);
        double collapsedHeight = (getHeight() - (focusHeight * weeksExpanded))
            / (numWeeks - weeksExpanded);

        double xOffset = 0;
        double yOffset = 0;
        double rowHeight = 0;
        DayNode each = null;

        for (int week = 0; week &lt; numWeeks; week++) {
            for (int day = 0; day &lt; numDays; day++) {
                each = getDay(week, day);
                double width = collapsedWidth;
                double height = collapsedHeight;
                                        
                if (each.hasWidthFocus()) width = focusWidth;
                if (each.hasHeightFocus()) height = focusHeight;
                                        
                if (animate) {
                    each.animateToBounds(xOffset, yOffset, width,
                        height, DEFAULT_ANIMATION_MILLIS).setStepRate(0);
                } else {
                    each.setBounds(xOffset, yOffset, width, height);
                }
                                        
                xOffset += width;
                rowHeight = height;
            }
            xOffset = 0;
            yOffset += rowHeight;
        }
    }
}
</pre>
          <pre class='snippet csharp' id='csharp2'>
class CalendarNode : PNode {
    public static int DEFAULT_NUM_DAYS = 7;
    public static int DEFAULT_NUM_WEEKS = 12;
    public static int TEXT_X_OFFSET = 1;
    public static int TEXT_Y_OFFSET = 1;
    public static int DEFAULT_ANIMATION_MILLIS = 250;
    public static float FOCUS_SIZE_PERCENT = 0.65f;
    public static Font DEFAULT_FONT = new Font("Arial", 7);
        
    int numDays = DEFAULT_NUM_DAYS;
    int numWeeks = DEFAULT_NUM_WEEKS;
    int daysExpanded = 0;
    int weeksExpanded = 0;
        
    public CalendarNode() {             
        for (int week = 0; week &lt; numWeeks; week++) {
            for (int day = 0; day &lt; numDays; day++) {
                AddChild(new DayNode(week, day));
            }
        }
    }
                        
    public DayNode GetDay(int week, int day) {
        return (DayNode) GetChild((week * numDays) + day);
    }

    public void LayoutChildren(bool animate) {
        float focusWidth = 0;
        float focusHeight = 0;
                        
        if (daysExpanded != 0 &amp;&amp; weeksExpanded != 0) {
            focusWidth = (Width * FOCUS_SIZE_PERCENT) / daysExpanded;
            focusHeight = (Height * FOCUS_SIZE_PERCENT) / weeksExpanded;
        }
        
        float collapsedWidth = (Width - (focusWidth * daysExpanded))
            / (numDays - daysExpanded);
        float collapsedHeight = (Height - (focusHeight * weeksExpanded))
            / (numWeeks - weeksExpanded);

        float xOffset = 0;
        float yOffset = 0;
        float rowHeight = 0;
        DayNode each = null;

        for (int week = 0; week &lt; numWeeks; week++) {
            for (int day = 0; day &lt; numDays; day++) {
                each = GetDay(week, day);
                float width = collapsedWidth;
                float height = collapsedHeight;
        
                if (each.HasWidthFocus) width = focusWidth;
                if (each.HasHeightFocus) height = focusHeight;

                if (animate) {
                    each.AnimateToBounds(xOffset, yOffset, width,
                        height, DEFAULT_ANIMATION_MILLIS).StepInterval = 0;
                } else {
                    each.SetBounds(xOffset, yOffset, width, height);
                }
        
                xOffset += width;
                rowHeight = height;
            }
            xOffset = 0;
            yOffset += rowHeight;
        }
    }
}
</pre>
        </div>

        <p>The constructor adds all of the day nodes as children to the calendar node.&nbsp; The
        actual number of days in the calendar is determined by the <code>numDays</code> and
        <code>numWeeks</code> fields.&nbsp; The <code>GetDay</code> method retrieves a particular
        day node.</p>

        <p>The most interesting part of the class is the <code>LayoutChildren</code> method.&nbsp;
        This is where all of the day nodes are sized and arranged in a tabular fashion.&nbsp; Days
        that are expanded vertically receive a certain percentage of the overall height and days
        expanded horizontally receive a certain percentage of the overall width.&nbsp; The
        remaining space is divided equally among the unexpanded days.</p>

        <p>This method should not be confused with <code>PNode</code>'s <code>LayoutChildren</code>
        method, which gets called whenever a node's bounds or one of its desendent's bounds
        change.&nbsp; We could have overridden that method to do our layout.&nbsp; But, since we
        want the option to animate the layout we create a custom method, which takes an
        <code>animate</code> flag to indicate if the children should be animated to their new
        positions.&nbsp; When the user clicks on a node, we will call this method with animate set
        to true.&nbsp; And when the calendar node is resized, we will call this method with animate
        set to false.</p>
      </li>

      <li>
        <p>Next we will add the interaction.&nbsp; Add this code to your the
        <code>CalendarNode</code> defined above.&nbsp; For the Java version, you should add the
        anonymous event listener class to the constructor.</p>

        <p class='toggle'><a href='javascript:void(0);' name='jlink3' class='toggle selected' id=
        'jlink3' onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a>
        | <a href='javascript:void(0);' name='clink3' id='clink3' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

        <div class='snippet' id='snippet3'>
          <pre class='snippet java' id='java3'>
CalendarNode.this.addInputEventListener(new PBasicInputEventHandler() {
    public void mouseReleased(PInputEvent event) {
        DayNode pickedDay = (DayNode) event.getPickedNode();
        if (pickedDay.hasWidthFocus &amp;&amp; pickedDay.hasHeightFocus) {
            setFocusDay(null, true);
        } else {
            setFocusDay(pickedDay, true);
        }
    }
});
public void setFocusDay(DayNode focusDay, boolean animate) {
    for (int i = 0; i &lt; getChildrenCount(); i++) {
        DayNode each = (DayNode) getChild(i);
        each.hasWidthFocus = false;
        each.hasHeightFocus = false;
    }

    if (focusDay == null) {
        daysExpanded = 0;
        weeksExpanded = 0;
    } else {
        focusDay.hasWidthFocus = true;
        daysExpanded = 1;
        weeksExpanded = 1;

        for (int i = 0; i &lt; numDays; i++) {
            getDay(focusDay.week, i).hasHeightFocus = true;
        }            

        for (int i = 0; i &lt; numWeeks; i++) {
            getDay(i, focusDay.day).hasWidthFocus = true;
        }            
    }
                
    layoutChildren(animate);
}
</pre>
          <pre class='snippet csharp' id='csharp3'>
public override void OnMouseUp(PInputEventArgs e) {
    DayNode pickedDay = (DayNode) e.PickedNode;
    if (pickedDay.HasWidthFocus &amp;&amp; pickedDay.HasHeightFocus) {
        SetFocusDay(null, true);
    } else {
        SetFocusDay(pickedDay, true);
    }
}
    
public void SetFocusDay(DayNode focusDay, bool animate) {
    for (int i = 0; i &lt; ChildrenCount; i++) {
        DayNode each = (DayNode) GetChild(i);
        each.HasWidthFocus = false;
        each.HasHeightFocus = false;
    }

    if (focusDay == null) {
        daysExpanded = 0;
        weeksExpanded = 0;
    } else {
        focusDay.HasWidthFocus = true;
        daysExpanded = 1;
        weeksExpanded = 1;

        for (int i = 0; i &lt; numDays; i++) {
            GetDay(focusDay.Week, i).HasHeightFocus = true;
        }

        for (int i = 0; i &lt; numWeeks; i++) {
            GetDay(i, focusDay.Day).HasWidthFocus = true;
        }
    }

    LayoutChildren(animate);
}

</pre>
        </div>

        <p>When the mouse is released, and the picked day is unfocused, we will set the focus to
        that day.&nbsp; If the picked day already has the focus, we will remove the focus from that
        day.&nbsp; The <code>SetFocusDay</code> method will determine whether or not each day in
        the calendar should be expanded vertically or horizontally and set that's node's focus
        properties accordingly.&nbsp; Then <code>LayoutChildren</code> will be called to animate
        the nodes to their new layout.</p>
      </li>
    </ol>

    <h2 id='step3'>3. Create a Fisheye Canvas</h2>

    <p class='preamble'>Unlike the previous tutorials, we are not going to extend PForm or PFrame
    in this example.&nbsp; Instead we will make a reusable component that extends PCanvas and we
    will add that component to our Java or .NET window.</p>

    <ol>
      <li>We extend PCanvas and add the calendar node to the scene-graph.<br />
        <br />

        <p class='toggle'><a href='javascript:void(0);' name='jlink4' class='toggle selected' id=
        'jlink4' onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a>
        | <a href='javascript:void(0);' name='clink4' id='clink4' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

        <div class='snippet' id='snippet4'>
          <pre class='snippet java' id='java4'>
public class TabularFisheye extends PCanvas {
    private CalendarNode calendarNode;

    public TabularFisheye() {
        calendarNode = new CalendarNode();
        getLayer().addChild(calendarNode);

        setZoomEventHandler(null);
        setPanEventHandler(null);

        addComponentListener(new ComponentAdapter() {
            public void componentResized(ComponentEvent arg0) {
                calendarNode.setBounds(getX(), getY(),
                    getWidth() - 1, getHeight() - 1);
                calendarNode.layoutChildren(false);
            }
        });
    }
}
</pre>
          <pre class='snippet csharp' id='csharp4'>
public class TabularFisheye : PCanvas {
    private CalendarNode calendar;

    public TabularFisheye() {
        calendar = new CalendarNode();
        Layer.AddChild(calendar);

        this.PanEventHandler = null;
        this.ZoomEventHandler = null;
    }
                
    protected override void OnResize(EventArgs e) {
        base.OnResize (e);
        calendar.SetBounds(ClientRectangle.X, ClientRectangle.Y,
            ClientRectangle.Width - 1, ClientRectangle.Height - 1);

        calendar.LayoutChildren(false);
    }
}
</pre>
        </div>

        <p>We turn off the default pan and zoom handlers.&nbsp; And we listen to resize events to
        set the bounds of the calendar node and lay out its children.</p>
      </li>
    </ol>

    <h2 id='step4'>4. Add the Canvas to a Window</h2>

    <p class='preamble'>Now we are ready to add our new component to the window.</p>

    <ol>
      <li>
        <p>We create a <code>JFrame</code> in Java or a <code>Form</code> in .NET as a wrapper for
        our component.&nbsp; Add the following class to your project.</p>

        <p class='toggle'><a href='javascript:void(0);' name='jlink5' class='toggle selected' id=
        'jlink5' onmousedown=
        'swapSections(&#39;csharp&#39;, &#39;java&#39;, &#39;clink&#39;, &#39;jlink&#39;);'>Java</a>
        | <a href='javascript:void(0);' name='clink5' id='clink5' onmousedown=
        'swapSections(&#39;java&#39;, &#39;csharp&#39;, &#39;jlink&#39;, &#39;clink&#39;);'>C#</a></p>

        <div class='snippet' id='snippet5'>
          <pre class='snippet java' id='java5'>
public class TabularFisheyeTester extends JFrame {
    public TabularFisheyeTester() {
        setTitle("Piccolo2D Tabular Fisheye");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TabularFisheye tabularFisheye = new TabularFisheye();
        getContentPane().add(tabularFisheye);
        pack();
        setVisible(true);
    }

    public static void main(String args[]) {
        new TabularFisheyeTester();
    }
}
</pre>
          <pre class='snippet csharp' id='csharp5'>
public class TabularFisheyeTester : Form {
    public TabularFisheyeTester() {
        TabularFisheye tabularFisheye = new TabularFisheye();
        Controls.Add(tabularFisheye);
        tabularFisheye.Bounds = this.ClientRectangle;
        tabularFisheye.Anchor = tabularFisheye.Anchor
            | AnchorStyles.Right | AnchorStyles.Bottom;
    }

    static void Main() {
        Application.Run(new TabularFisheyeTester());
    }
}

</pre>
        </div>

        <p>First, we create an instance of our TabularFisheye component and add it to the
        window.&nbsp; In the .NET version, we anchor our new component, so that it will get resized
        as the window is resized.&nbsp; Java handles this for us.</p>
      </li>
    </ol>
  </div><script src='snippets.js' type='text/javascript'>
//<![CDATA[
    //]]>
  </script><script src='../scrollsidebar.js' type='text/javascript'>
//<![CDATA[
    //]]>
  </script>
</body>
</html>
