nodeLayer.addInputEventListener(new PDragEventHandler() {
    {
        PInputEventFilter filter = new PInputEventFilter();
        filter.setOrMask(InputEvent.BUTTON1_MASK | InputEvent.BUTTON3_MASK);
        setEventFilter(filter);
    }

    public void mouseEntered(PInputEvent e) {
        super.mouseEntered(e);
        if (e.getButton() == MouseEvent.NOBUTTON) {
            e.getPickedNode().setPaint(Color.RED);
        }
    }
    
    public void mouseExited(PInputEvent e) {
        super.mouseExited(e);
        if (e.getButton() == MouseEvent.NOBUTTON) {
            e.getPickedNode().setPaint(Color.WHITE);
        }
    }
    
    protected void startDrag(PInputEvent e) {
        super.startDrag(e);
        e.setHandled(true);
        e.getPickedNode().moveToFront();
    }
    
    protected void drag(PInputEvent e) {
        super.drag(e);
        
        ArrayList edges = (ArrayList) e.getPickedNode().getAttribute("edges");
        for (int i = 0; i < edges.size(); i++) {
            GraphEditor.this.updateEdge((PPath) edges.get(i));
        }
    }
});
